(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{252:function(e,t,a){e.exports=a(253)},253:function(e,t,a){"use strict";a.r(t);var n=a(4),o=a(5),i=a(9),r=a(18),c=a(14),l=a(17),s=a(131),d=a.n(s),h=a(229),p=a.n(h),u=a(230),m=a.n(u),v=(a(260),a(283)),f="/web_model/model.json";console.log("Hi"),f="/tfjs-yolov5-example/web_model/model.json";var g=["Starfish"],w=640,y=640;console.log(f);var j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={model:null,preview:"",predictions:[]},a.onDrop=function(e,t,n){a.setState({preview:e[0].preview||n[0]})},a.cropToCanvas=function(e,t,a){var n=e.naturalWidth,o=e.naturalHeight;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="#000000",a.fillRect(0,0,t.width,t.height);var i=Math.min(t.width/e.naturalWidth,t.height/e.naturalHeight),r=Math.round(n*i),c=Math.round(o*i);a.drawImage(e,0,0,n,o,(t.width-r)/2,(t.height-c)/2,r,c)},a.onImageChange=function(e){var t=document.getElementById("canvas"),o=t.getContext("2d");a.cropToCanvas(e.target,t,o);var i=v.tidy(function(){return v.image.resizeBilinear(v.browser.fromPixels(t),[w,y]).div(255).expandDims(0)});a.state.model.executeAsync(i).then(function(e){var a="16px sans-serif";o.font=a,o.textBaseline="top";var i,r=Object(n.a)(e,4),c=r[0],l=r[1],s=r[2],d=r[3],h=c.dataSync(),p=l.dataSync(),u=s.dataSync(),m=d.dataSync()[0];for(v.dispose(e),i=0;i<m;++i){var f=h.slice(4*i,4*(i+1)),w=Object(n.a)(f,4),y=w[0],j=w[1],b=w[2],x=w[3];y*=t.width,b*=t.width,j*=t.height;var S=b-y,F=(x*=t.height)-j,D=g[u[i]],E=p[i].toFixed(2);o.strokeStyle="#00FFFF",o.lineWidth=4,o.strokeRect(y,j,S,F),o.fillStyle="#00FFFF";var O=o.measureText(D+":"+E).width,C=parseInt(a,10);o.fillRect(y,j,O+4,C+4)}for(i=0;i<m;++i){var k=h.slice(4*i,4*(i+1)),I=Object(n.a)(k,3),z=I[0],M=I[1];z*=t.width,M*=t.height;var B=g[u[i]],N=p[i].toFixed(2);o.fillStyle="#000000",o.fillText(B+":"+N,z,M)}})},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.loadGraphModel(f).then(function(t){e.setState({model:t})})}},{key:"render",value:function(){return d.a.createElement("div",{className:"Dropzone-page"},this.state.model?d.a.createElement(m.a,{className:"Dropzone",accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!1,onDrop:this.onDrop},this.state.preview?d.a.createElement("img",{alt:"upload preview",onLoad:this.onImageChange,className:"Dropzone-img",src:this.state.preview}):"Choose or drop a file.",d.a.createElement("canvas",{id:"canvas",width:"640",height:"640"})):d.a.createElement("div",{className:"Dropzone"},"Loading model..."))}}]),t}(d.a.Component),b=document.getElementById("root");p.a.render(d.a.createElement(j,null),b)},260:function(e,t,a){},268:function(e,t){},269:function(e,t){},277:function(e,t){},280:function(e,t){},281:function(e,t){},282:function(e,t){}},[[252,2,1]]]);
//# sourceMappingURL=main.2c2d6ee5.chunk.js.map